\chapter{Conservations laws and symmetries}
\label{chap:ConsLaws}
We saw in the previous chapter that cyclic coordinates lead to their conjugate momenta being constants of motion. We also saw that when the Lagrangian does not depend explicitly on time, the total energy of the system is conserved (or more precisely, the Jacobi integral is conserved). These conservation laws can be put in a more general form that states that for each symmetry in the action, there is a corresponding conserved quantity. This is called Noether's theorem.

\section{Conserved generalized momenta}
Given a Lagrangian, $L$, the generalized momenta are defined as:
\begin{align}
p_i\equiv\frac{\partial L}{\partial \dot{q}_i}
\end{align}
The Lagrange equations of motion are thus:
\begin{align}
\frac{d}{dt}\left(\frac{\partial L}{\partial \dot{q}_i}\right)-\frac{\partial L}{\partial q_i}&=0\nonumber\\
\therefore \dot{p}_i=\frac{\partial L}{\partial q_i}
\end{align}
Thus, if the Lagrangian does not depend explicitly on $q_i$, the generalized momentum $p_i$ is a constant (i.e. it does not change with time). The interesting point to note is that the conserved generalized momenta depend on the choice of generalized coordinates.

\begin{example}{0pt}{Compare the conserved quantities for a particle moving in a potential that depends on the distance from the origin for cartesian and spherical coordinates}{}
The Lagrangian in cartesian coordinates is given by:
\begin{align*}
L=\frac{1}{2}m(\dot{x}^2+\dot{y}^2+\dot{z}^2)-V\left(\sqrt{x^2+y^2+z^2}\right)
\end{align*}
and does not appear to have any cyclic coordinates. We might be led to think that there is no conserved quantity.
In spherical coordinates, the Lagrangian is given by:
\begin{align*}
L=\frac{1}{2}m(\dot{r}^2+r^2\dot{\theta}^2+r^2\sin^2{\theta}\dot{\phi}^2)-V(r)
\end{align*}
where the variable $\phi$ is cyclic. The corresponding conserved quantity is:
\begin{align*}
p_\phi &=\frac{\partial L}{\partial \dot{\phi}}\\
&=mr^2\sin^2\theta\dot{\phi}
\end{align*}
\end{example}

The question then arises of how to determine if there are any conserved quantities or an optimal choice of generalized coordinates that uncover those conserved quantities. In this chapter, we will focus on uncovering the conserved quantities. In a later chapter, we will discuss ``Canonical Transformations'', which is the method of discovering a set of generalized coordinates where all generalized momenta are conserved (at the expense that the coordinate transformations are not straightforward).

\section{Continuous Transformations}
We start by considering ``continuous transformations'' of coordinates. Transformations of coordinates are continuous if they depend on a parameter, $\epsilon$ that can be varied continuously:
\begin{align}
q_i'&=q_i'(q_1,\dots ,q_n,\dot{q}_1,\dots ,\dot{q}_n, t, \epsilon)\nonumber\\
t'&=t'(q_1,\dots ,q_n,\dot{q}_1,\dots ,\dot{q}_n, t, \epsilon)
\end{align}
where we have included the possibility that time can also be transformed. Since $\epsilon$ can be varied continuously, the transformations can be built up as the sum of infinitesimal transformations. It is intended that when $\epsilon=0$ then $q_i'=q_i$. For an infinitesimal transformation, we can introduce functions $f$ and $g$ and write:
\begin{align}
q_i'&=q_i+\delta q_i=q_i+f_i(q_1,\dots ,q_n,\dot{q}_1,\dots ,\dot{q}_n, t)\delta\epsilon\nonumber\\
t'&=t+\delta t=t+g(q_1,\dots ,q_n,\dot{q}_1,\dots ,\dot{q}_n, t)\delta\epsilon\nonumber\\
\delta q_i&=q_i'-q_i=f_i(q_1,\dots ,q_n,\dot{q}_1,\dots ,\dot{q}_n, t)\delta\epsilon\nonumber\\
\delta t&=t'-t=g(q_1,\dots ,q_n,\dot{q}_1,\dots ,\dot{q}_n, t)\delta\epsilon
\end{align}
\begin{example}{0pt}{Determine the infinitesimal form of a continuous transformation corresponding to a translation along the x-axis of a distance $\epsilon$}{}
Using cartesian coordinates as the generalized coordinates, the transformation equations are:
\begin{align*}
x'&=x+\epsilon\\
y'&=y\\
z'&=z\\
t'&=t
\end{align*}
The infinitesimal version is thus:
\begin{align*}
x'&=x+\delta\epsilon\\
y'&=y\\
z'&=z\\
t'&=t
\end{align*}
and we have $f_1=f_x=1$, and all the other $f_i$ and $g$ are equal to zero.
\end{example}

\begin{example}{0pt}{Determine the infinitesimal form of a continuous transformation corresponding to an infinitesimal rotation about the z-axis by angle $\epsilon$.}{\capfig{0.2\textwidth}{figures/SmallRotation.png}{Infinitesimal rotation of the axes by an angle $\epsilon$ around the z-axis}}
In cartesian coordinates, we have:
\begin{align*}
x'&=x\cos\epsilon -y\sin\epsilon\\
y'&=x\sin\epsilon +y\cos\epsilon
\end{align*}
For the infinitesimal version, $\delta\epsilon$ is small, so we have:
\begin{align*}
\cos\delta\epsilon &\sim 1\\
\sin\delta\epsilon &\sim \delta\epsilon\\
\therefore x'&=x-y\delta\epsilon\\
\therefore y'&=y+x\delta\epsilon
\end{align*}
Thus we have, with $q_1=x$ and $q_2=y$:
\begin{align*}
f_1&=-y\\
f_2&=x
\end{align*}
and $g=0$.
\label{ex:zrotation}
\end{example}

\section{Noether's theorem}
Noether's theorem states that any continuous transformation that does not change the action is associated with a conserved quantity (we call the quantity a ``charge'', $Q$). We say that the action is invariant under such a continuous transformation, and we mean that:
\begin{align}
S=\int_{t_a}^{t_b}L(q_i,\dot{q}_i,t)dt=\int_{t_a'}^{t_b'}L(q_i',\dot{q}_i',t)dt
\end{align}
where on the right hand side, since $t$ is just a dummy integration variable we left it as $t$ instead of $t'$ (note however that we did need to change the limits of the integral to be in the transformed time). As a notation, we imply that $L(q_i,\dot{q}_i,t)$ depends on all the $q_i$. 
 
Because the continuous transformations are continuous we can consider the case of the infinitesimal version of a given transformation. If the action is invariant under the infinitesimal transformation, it will also be invariant under a series of infinitesimal transformations that lead to a total transformation. Requiring invariance under the infinitesimal transformation:
\begin{align}
S&=\int_{t_a}^{t_b}L(q_i,\dot{q}_i,t)dt=\int_{t_a+\delta t_a}^{t_b+\delta t_b} L(q_i+\delta q_i', \dot{q}_i+\delta\dot{q}_i',t)dt\nonumber\\
\therefore \delta S&=\int_{t_a+\delta t_a}^{t_b+\delta t_b} L(q_i+\delta q_i', \dot{q}_i+\delta\dot{q}_i',t)dt-\int_{t_a}^{t_b}L(q_i,\dot{q}_i,t)dt
\end{align}
where the $\delta t_{a(b)}=g(t_a(t_b)) \delta \epsilon$ in the limits of the integral, can in principle depend on $t$ (through $g$) and are thus different at the two end points. If the action is invariant under the transformation, then $\delta S=0$.

%Note that we have used $q_i'=q_i+\delta q_i'$ instead of $q_i'=q_i+\delta q_i$. This is because the $q_i'$ are varied both by the transformation of coordinates, $\delta q_i$, and because of the transformation in time, $\delta t$, (since the $q_i'$ are functions of time):
%\begin{align}
%q_i'&= q_i +\delta q_i+\dot{q}_i\delta t+(\dots)\delta q \delta t\nonumber\\
%\therefore\delta q_i' &=\delta q_i+\dot{q}_i\delta t
%\end{align}
%
%Before proceeding, note the following identity. If we have a function $f(q_i,\dot{q}_i,t)$ and its anti-derivative $F(q_i,\dot{q}_i,t)$:
%\begin{align}
%\int_{t_a}^{t_b} f dt-\int_{t_a+\delta t_a}^{t_b+\delta t_b} f dt&=F(t_b)-F(t_a)-F(t_b+\delta t_b)+F(t_a+\delta t_a)\nonumber\\
%\end{align}
%where we can evaluate $F(t_a+\delta t_a)$ using a Taylor series:
%\begin{align}
%F(t_a+\delta t_a)&\equiv F(q_i(t_a+\delta t_a),\dot{q}_i(t_a+\delta t_a),t_a+\delta t_a)\nonumber\\
%&=F(q_i(t_a),\dot{q}_i(t_a),t_a)+\frac{dF}{dt}\delta t_a\nonumber\\
%&=F(t_a)+(\frac{dF}{dt}\delta t)\rvert _{t_a}=F(t_a)+(f\delta t)\rvert _{t_a}
%\end{align}
%Hence, we have:
%\begin{align}
%\int_{t_a}^{t_b} f dt-\int_{t_a+\delta t_a}^{t_b+\delta t_b} f dt&=F(t_b)-F(t_a)-F(t_b+\delta t_b)+F(t_a+\delta t_a)\nonumber\\
%&=F(t_b)-F(t_a)+F(t_a)+(f\delta t)\rvert _{t_a}-F(t_b)-(f\delta t)\rvert _{t_b}\nonumber\\
%&=(f\delta t)\rvert _{t_a}-(f\delta t)\rvert _{t_b}\nonumber\\
%&=-\int_{t_a}^{t_b} \frac{d}{dt}f\delta t dt\nonumber\\
%\therefore \int_{t_a+\delta t_a}^{t_b+\delta t_b} f dt &=\int_{t_a}^{t_b} f dt+\int_{t_a}^{t_b} \frac{d}{dt}f\delta t dt
%\end{align}
%allowing us to change the limits of the integral and put the $\delta t$ into one of the integrands.\textbf{There is some mistake, there should be a minus sign in the last equation. The next part assumes it was a minus sign}
%
%We now examine the transformed action, before considering the variation in the action. Since the $\delta$ are small, we can expand the Lagrangian about $L(q_i,\dot{q}_i,t)$, in the first power of the $\delta$:
%\begin{align}
%\int_{t_a+\delta t_a}^{t_b+\delta t_b} L(q_i+\delta q_i', \dot{q}_i'+\delta\dot{q}_i',t)dt &=\int_{t_a+\delta t_a}^{t_b+\delta t_b} \left[L(q_i,\dot{q}_i,t) +\sum_{i=1}^n \left(\frac{\partial L}{\partial q_i}\delta q_i'+\frac{\partial L}{\partial \dot{q}_i}\delta\dot{q}_i'+\dots\right) \right]dt\nonumber\\
%&=\int_{t_a+\delta t_a}^{t_b+\delta t_b}\left[L(q_i,\dot{q}_i,t) +\sum_{i=1}^n \left(\frac{\partial L}{\partial q_i}\delta q_i'+p_i\delta\dot{q}_i'\right) \right]dt\nonumber\\
%&=\int_{t_a+\delta t_a}^{t_b+\delta t_b}\left[L(q_i,\dot{q}_i,t) +\sum_{i=1}^n \left(\dot{p}\delta q_i'+p_i\delta\dot{q}_i'\right) \right]dt\nonumber\\
%&=\int_{t_a+\delta t_a}^{t_b+\delta t_b} \left[L(q_i,\dot{q}_i,t) +\frac{d}{dt}\sum_{i=1}^n p_i\delta q_i'\right]dt\nonumber\\
%&=\int_{t_a}^{t_b} \left[L(q_i,\dot{q}_i,t) +\frac{d}{dt}\sum_{i=1}^n p_i\delta q_i'\right]dt\nonumber\\
%&-\int_{t_a}^{t_b} \frac{d}{dt}\left[L(q_i,\dot{q}_i,t) +\frac{d}{dt}\sum_{i=1}^n p_i\delta q_i'\right]\delta t dt\nonumber\\
%&=\int_{t_a}^{t_b} \left[L(q_i,\dot{q}_i,t) +\frac{d}{dt}\sum_{i=1}^n p_i\delta q_i'\right]dt -\int_{t_a}^{t_b} \frac{d}{dt}L(q_i,\dot{q}_i,t)\delta t dt
%\end{align}
%where the term of order $\delta q_i \delta t$ was dropped, and we used the relation that we derived to change the limits of the integral.
%
%If we now require that $\delta S=0$, by taking the difference between the transformed and untransformed actions:
%\begin{align}
%\delta S&=\int_{t_a}^{t_b} \left[L(q_i,\dot{q}_i,t) +\frac{d}{dt}\sum_{i=1}^n p_i\delta q_i'\right]dt -\int_{t_a}^{t_b} \frac{d}{dt}L(q_i,\dot{q}_i,t)\delta t dt-\int_{t_a}^{t_b}L(q_i,\dot{q}_i,t)dt\nonumber\\
%&=\int_{t_a}^{t_b} \frac{d}{dt}\left[ \sum_{i=1}^n p_i\delta q_i' -L(q_i,\dot{q}_i,t)\delta t\right] dt\nonumber\\
%&=\int_{t_a}^{t_b} \frac{d}{dt}\left[ \sum_{i=1}^n p_i(\delta q_i+\dot{q}_i\delta t) -L(q_i,\dot{q}_i,t)\delta t\right] dt\nonumber\\
%&=\int_{t_a}^{t_b} \frac{d}{dt}\left[\sum_{i=1}^np_i\delta q_i +\left(\sum_{i=1}^n (p_i\dot{q}_i)-L\right)\delta t\right]dt=0
%\end{align}
%Hence, under the conditions
Under the condition that $\delta S=0$ the following quantity $Q$ is conserved (does not vary with time):
\begin{align}
Q&\equiv\sum_{i=1}^np_i\delta q_i +\left(\sum_{i=1}^n p_i\dot{q}_i-L\right)\delta t\nonumber\\
&=\sum_{i=1}^n p_if_i +\left(\sum_{i=1}^n p_i\dot{q}_i-L\right)g\nonumber\\
\end{align}
where we have (re-)introduced $\delta q_i=f_i\delta\epsilon$ and $\delta t=g\delta\epsilon$. Note that there are two terms, one is associated with invariance in time, $g$, and one is associated with invariance in space, $f$. You may recognize the one related to time as the Jacobi integral.

Note that if a symmetry preserves the Lagrangian, the action will also be preserved. It is often more straightforward to verify if the Lagrangian is invariant under a transformation. It is also more straightforward to only consider variations in the position coordinates.

Consider the variation of the Lagrangian with respect to the coordinate transformation:
\begin{align}
q_i'&=q_i+f_i(q_1,\dots ,q_n)\delta\epsilon\nonumber\\
\delta q_i&=\delta\epsilon f_i(q_1,\dots ,q_n)\nonumber\\
\delta L&=\sum_{i=1}^n \frac{\partial L}{\partial q_i}\delta q_i+\frac{\partial L}{\partial \dot{q}_i}\delta \dot{q}_i
\end{align}
Recall the $L$ must still satisfy Lagrange's equations, so we have:
\begin{align}
p_i&=\frac{\partial L}{\partial \dot{q}_i}\nonumber\\
\dot{p}_i&=\frac{\partial L}{\partial q_i}
\end{align}
which we can substitute back into the variation of the Lagrangian:
\begin{align}
\delta L&=\sum_{i=1}^n \dot{p}_i\delta q_i+p_i\delta \dot{q}_i\nonumber\\
&=\frac{d}{dt}\sum_{i=1}^np_i\delta q_i\nonumber\\
&=\delta\epsilon \frac{d}{dt}\sum_{i=1}^np_if_i(q_1,\dots ,q_n)
\end{align}
which must be true for any arbitrary $\epsilon$. Thus, if the variation of the Lagrangian is zero then the quantity:
\begin{align}
Q=\sum_{i=1}^np_if_i(q_1,\dots ,q_n)
\end{align}
is conserved, which is one of the quantities we had before. In principle, the variation of $L$ can be equal to zero within a total time derivative, since adding a total time derivative to the Lagrangian does not change the equations of motion.

Note that Noether's theorem only applies to \textbf{continuous} transformations that leave the action or the Lagrangian unchanged. For example, a transformation that mirrors the coordinate system may preserve the Lagrangian, but it is not a continuous transformation, so does not have an associated conserved quantity. There may be other continuous symmetries that are not straightforward coordinate transforms (such as those that we considered in this proof) that may lead to less obvious conserved quantities. 

\section{Translation symmetry}
We can find the conserved quantities if the Lagrangian is invariant to translation. For a translation, the transformation equations are:
\begin{align}
q_i'=q_i+\delta \epsilon f_i
\end{align}
where the function $f_i$ is independent of the coordinates. Consider a translation in the $q_1$ direction, where $f_1=1$ and all other $f_i=0$. Since time is not involved in the transformation, we also set $g=0$, or consider only the invariance of the Lagrangian. If the Lagrangian is invariant under translations in the $q_1$ direction, then the quantity:
\begin{align}
Q=\sum_{i=1}^np_if_i(q_1,\dots ,q_n)=p_1
\end{align}
is conserved. That is, we recover the observation that was made about cyclic coordinates: if a coordinate does not appear explicitly in the Lagrangian (thus the Lagrangian is invariant when that coordinate is transformed), the conjugate momentum for that coordinate is conserved.

More generally, for each direction in space that the Lagrangian is symmetric, momentum in that direction is a conserved quantity. In cartesian coordinates, this is the principle of conservation of momentum.

\section{Rotational symmetry}
Consider a Lagrangian that is invariant under a rotation about the z-axis. We saw in example \ref{ex:zrotation} that for a rotation about the z-axis in cartesian coordinates, we have:
\begin{align}
f_1&=-y\\
f_2&=x\\
f_3&=0\\
g&=0
\end{align}
The conserved quantity is thus:
\begin{align}
Q=\sum_{i=1}^np_if_i=-p_xy+p_yx
\end{align}
which is the $z$ component of angular momentum:
\begin{align}
\vec{L}=\vec{r}\times\vec{p}
\end{align}

In general, the angular momentum in a direction is conserved if the Lagrangian is invariant to rotations about an axis in that direction.

\section{Time symmetry}
In the case of a time symmetry, we have $f_i=0$ and $g=1$:
\begin{align}
t'=t+\delta \epsilon
\end{align}
This gives the conserved quantity:
\begin{align}
Q=\sum_{i=1}^np_i\dot{q}_i-L
\end{align}

We have already seen that when the Lagrangian does not explicitly depend on time, the quantity:
\begin{align}
h=\sum_{i=1}^np_i\dot{q}_i-L
\end{align}
is conserved. Of course, if the Lagrangian does not depend on time, then the action will be invariant to a time translation.

